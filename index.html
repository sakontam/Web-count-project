<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>‡πÄ‡∏ß‡πá‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡∏ó‡∏≥‡πÑ‡∏î‡πâ</title>
    <link rel="icon" href="183dcbf6-fd89-4138-86ee-17e3e153fbf7.jpg" type="image/x-icon" />
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
      }
      h1,
      h2 {
        text-align: center;
        font-size: 100px;
      }
      h3 {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div>
      <h1>‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà</h1>
      <h2 id="counter">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h2>
      <h3>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏´‡∏£‡∏≠‡∏Å</h3>
      <h3>‡πÅ‡∏Ñ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ô‡∏™‡πÅ‡∏Å‡∏ô‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô</h3>
    </div>
    <script>
      // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå localStorage ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô session ‡πÉ‡∏´‡∏°‡πà
      if (!sessionStorage.getItem("session_active")) {
        localStorage.removeItem("refreshCount");
        localStorage.removeItem("refreshTimestamps");
      }
      sessionStorage.setItem("session_active", "true");

      // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î
      if (performance.navigation.type === 1) {
        let refreshCount = parseInt(
          localStorage.getItem("refreshCount") || "0"
        );
        refreshCount += 1;
        localStorage.setItem("refreshCount", refreshCount);

        // ‡πÄ‡∏û‡∏¥‡πà‡∏° timestamp ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
        let timestamps = JSON.parse(
          localStorage.getItem("refreshTimestamps") || "[]"
        );
        const now = Date.now();
        timestamps.push(now);

        // ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        timestamps = timestamps.filter((ts) => now - ts <= 5000);
        localStorage.setItem("refreshTimestamps", JSON.stringify(timestamps));

        // ‡∏ñ‡πâ‡∏≤‡∏£‡∏µ‡πÄ‡∏Å‡∏¥‡∏ô 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
        if (timestamps.length >= 5) {
          alert("‡∏Å‡∏î‡∏ö‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡∏•‡∏∞! ‡∏ö‡πä‡∏≤‡∏¢‡∏ö‡∏≤‡∏¢‡∏à‡πâ‡∏≤ üëã");
          window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
        }

        document.getElementById("counter").textContent =
          refreshCount > 10 ? "‡∏û‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß" : `‡∏£‡∏µ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ${refreshCount} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
      }

      // ‡∏î‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏î F5 / Ctrl+R ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
      window.addEventListener("keydown", function (e) {
        if (e.key === "F5" || (e.ctrlKey && e.key === "r")) {
          e.preventDefault();
          document.getElementById("counter").textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏£‡∏µ‡∏ô‡∏∞‡∏à‡πä‡∏∞";
        }
      });

      window.addEventListener("beforeunload", function (e) {
        // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
        e.preventDefault();
        e.returnValue = ""; // ‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô returnValue
        return ""; // ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ return ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ
      });

      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      if (performance.navigation.type !== 1) {
        // ‡πÇ‡∏´‡∏•‡∏î count ‡∏õ‡∏Å‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏µ
        fetch("https://web-count-project.onrender.com/count", {
          method: "GET",
          credentials: "include",
        })
          .then((res) => res.json())
          .then((data) => {
            document.getElementById("counter").textContent = data.count;
          });
      } else {
        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î ‡∏Å‡πá‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å fetch
        console.log("‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å fetch ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä");
      }
    </script>
  </body>
</html>
