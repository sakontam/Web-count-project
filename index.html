<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>‡πÄ‡∏ß‡πá‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡∏ó‡∏≥‡πÑ‡∏î‡πâ</title>
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: Arial, sans-serif;
      }
      h1,
      h2 {
        text-align: center;
        font-size: 100px;
      }
      h3 {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div>
      <h1>‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà</h1>
      <h2 id="counter">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h2>
      <h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏Å‡∏±‡∏ô55555</h3>
    </div>
    <script>
      // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå localStorage ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô session ‡πÉ‡∏´‡∏°‡πà
      if (!sessionStorage.getItem("session_active")) {
        localStorage.removeItem("refreshCount");
        localStorage.removeItem("refreshTimestamps");
      }
      sessionStorage.setItem("session_active", "true");
    
      // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î
      if (performance.navigation.type === 1) {
        let refreshCount = parseInt(localStorage.getItem("refreshCount") || "0");
        refreshCount += 1;
        localStorage.setItem("refreshCount", refreshCount);
    
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° timestamp ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
        let timestamps = JSON.parse(localStorage.getItem("refreshTimestamps") || "[]");
        const now = Date.now();
        timestamps.push(now);
    
        // ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        timestamps = timestamps.filter((ts) => now - ts <= 5000);
        localStorage.setItem("refreshTimestamps", JSON.stringify(timestamps));
    
        // ‡∏ñ‡πâ‡∏≤‡∏£‡∏µ‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö
        if (timestamps.length >= 2) {
          alert("‡∏Å‡∏î‡∏ö‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡∏•‡∏∞! ‡∏ö‡πä‡∏≤‡∏¢‡∏ö‡∏≤‡∏¢‡∏à‡πâ‡∏≤ üëã");
          window.close(); 
        }
    
        document.getElementById("counter").textContent =
          refreshCount > 40 ? "‡∏û‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß" : `‡∏£‡∏µ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ${refreshCount} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
      }
    
      // ‡πÇ‡∏´‡∏•‡∏î count ‡∏õ‡∏Å‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏µ
      fetch("https://web-count-project.onrender.com/count", {
        method: "GET",
        credentials: "include",
      })
        .then((res) => res.json())
        .then((data) => {
          if (performance.navigation.type !== 1) {
            document.getElementById("counter").textContent = data.count;
          }
        });
    
      // ‡∏î‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏î F5 / Ctrl+R
      window.addEventListener("keydown", function (e) {
        if ((e.key === "F5")) {
          e.preventDefault();
          document.getElementById("counter").textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î F5 ‡∏ô‡∏∞‡∏à‡πä‡∏∞";
        }
      });

      window.addEventListener("keydown", function (e) {
        if ((e.ctrlKey && e.key === "r")) {
          e.preventDefault();
          document.getElementById("counter").textContent = "‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏î CTRL+R ‡∏ô‡∏∞‡∏à‡πä‡∏∞";
        }
      });
    
      // ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
      window.addEventListener("beforeunload", function (e) {
        e.preventDefault();
        e.returnValue = "";
      });
    </script>       
  </body>
</html>
